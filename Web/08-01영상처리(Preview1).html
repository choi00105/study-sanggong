<!DOCTYPE html>
<HTML>
    <HEAD>
        <style>
            
            body {
                margin-top: 80px;
                text-align: center;
                background-color: rgba(127, 127, 127, 0.6);
                overflow: hidden;
                -ms-user-select: none;
                -moz-user-select: -moz-none;
                -khtml-user-select: none;
                -webkit-user-select: none;
                user-select: none;
            }

            .title {
                margin: 10px 10px;
                font-size: 50px;
                font-weight: bold;
                font-style: italic;
                text-shadow: 2px 2px 2px white;
            }

            div > #lena {
                height: 64px;
                width: 64px;
                box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.4);
                transition-duration: 1s;

            }

            div > .arrow {
                font-size: 50px;
            }
            #mark {
                font-size: 50px;
                cursor: pointer;
            }
            .show { 
               display: inline-block; 
            }

            .hide { 
                display: none; 
            }
            #pray {
                font-size: 50px;
                cursor: pointer;

            }

            div > #lenaExample {
                height: 80px;
                box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.4);
                transition-duration: 1s;
            }
            #lena:hover {
                height: 160px;
                width: 160px;
            }
            #lenaExample:hover {
                height: 200px;
            }
            .container {
                justify-content: center;
                align-items: center;
                display: flex;
            }
            canvas {
                border: 8px double black;
                background-color: white;
                margin: 20px 5px;
                padding: 10px;
                box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.4);
            }

            #inCanvas, #outCanvas {
                height: 256px;
                width: 256px;
            }
            .bottom{
                margin: 30px 10px;
            }
            .bottom > p {
                font-size: 12px;
                text-align: left;
                color: gray;
            }
            a {
                text-decoration: none;
            }
            .stophv {
                pointer-events: none;
            }

        </style>
        <script lang="javascript">
            var inCanvas, inCtx, outCanvas, outCtx;
            var inImage, inH, inW;
            var outImage, outH, outW;
            var inPaper, outPaper;
            var inFile;

            // =============== ê³µí†µ í•¨ìˆ˜ë¶€ 
            
            function init() {
                inCanvas =document.getElementById("inCanvas"); // ë„í™”ì§€ì— ì ‘ê·¼
                inCtx = inCanvas.getContext("2d"); // ë¬¼ê° , ë¶“, ë¬¼í†µ
                outCanvas =document.getElementById("outCanvas"); // ë„í™”ì§€ì— ì ‘ê·¼
                outCtx = outCanvas.getContext("2d"); // ë¬¼ê° , ë¶“, ë¬¼í†µ
                inCtx.font = "30px NotoKR";
                inCtx.fillStyle = "rgb(0,0,0)";
                inCtx.fillText("ì‚¬ì§„ì„ ì„ íƒí•´ ì£¼ì„¸ìš”",5,90);
                outCtx.font = "30px gothic";
                outCtx.fillStyle = "rgb(0,0,0)";
                outCtx.fillText("ì—¬ê¸° ì¶œë ¥ ë©ë‹ˆë‹¤",30,90);
                

            }
            function openRawImage() {
                // ì„ íƒí•œ RAW ë°ì´í„°ë¥¼ ì½ì–´ì„œ ì²˜ë¦¬í•˜ê¸°
                inFile = document.getElementById('inFile').files[0]; //
                const fileExtension = inFile.name.split('.').pop(); // íŒŒì¼ í™•ì¥ì ì¶”ì¶œ
                if (fileExtension !== 'raw') {
                    document.getElementById('inFile').value = ''; // ì„ íƒí•œ íŒŒì¼ ì´ë¦„ ì•ˆëœ¨ê²Œ
                    inFile = null;
                    alert('ì˜¬ë°”ë¥¸ íŒŒì¼ í™•ì¥ì íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”\n(í˜„ì¬ëŠ” .raw íŒŒì¼ë§Œ ì§€ì›ë©ë‹ˆë‹¤)');
                } else {
                // (ì¤‘ìš” !) ì´ë¯¸ì§€ í­ê³¼ ë†’ì´ë¥¼ ê³„ì‚°
                inH = inW =  Math.floor(Math.sqrt(inFile.size));
                console.log(inFile.name, fileExtension);
                // ë©”ëª¨ë¦¬ í™•ë³´
                inImage = new Array(inH);
                for(var i = 0; i<inH; i++) {
                    inImage[i] = new Array(inW);
                }
                // ìº”ë²„ìŠ¤ í¬ê¸° ì¡°ì ˆ
                inCanvas.height =inH;
                inCanvas.width = inW;

                // RAW -> ë©”ëª¨ë¦¬(ë°°ì—´)ë¡œ ë¡œë”©
                var reader = new FileReader(); // íŒŒì¼ ê°ì²´
                reader.readAsBinaryString(inFile);
                reader.onload = function() {
                    var blob = reader.result; // íŒŒì¼ì„ í•œ ë©ì–´ë¦¬(blob)ì— ë„£ê¸°
                    // blobì—ì„œ í•œì ì”© (256 * 256) ë½‘ì•„ì„œ 2ì¹˜ì› ë°°ì—´ì— ë„£ê¸°
                    for (var i = 0; i<inH; i++){
                        for (var k = 0; k<inH; k++){
                            var sPixel = (i*inH + k); // ì‹œì‘ ìœ„ì¹˜
                            var ePixel = (i*inH + k) + 1; // ë ìœ„ì¹˜
                            inImage[i][k] = blob.slice(sPixel, ePixel).charCodeAt(0); // í•œì ë§Œ ì°ì–´ë‚´ê¸° & ex) 'ëº‡' -> 253
                        }
                    }
                    displayImage();
                }
                outCtx.fillStyle = "rgb(0,0,0)";
                outCtx.fillRect(0, 30, 300, 100);
                
                outCtx.fillStyle = "rgb(255,255,255)";
                outCtx.fillText("ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•´",30,70);
                outCtx.fillText("ì£¼ì„¸ìš”",100,110);
                }
            }

            function displayImage() {
                // ì…ë ¥ ë©”ëª¨ë¦¬ë¥¼ paperì— ì½•ì½• ì°ê¸°
                
                inPaper = inCtx.createImageData(inH, inW);
                    for (var i = 0; i<inH; i++){
                        for (var k = 0; k<inW; k++){
                            var px = inImage[i][k];
                            inPaper.data[(i*inH +k) *4 + 0] = px; // R
                            inPaper.data[(i*inH +k) *4 + 1] = px; // G
                            inPaper.data[(i*inH +k) *4 + 2] = px; // B
                            inPaper.data[(i*inH +k) *4 + 3] = 255; // Alpha
                        }
                    }
                inCtx.putImageData(inPaper, 0, 0);
                
                

                // ì¶œë ¥ ë©”ëª¨ë¦¬ë¥¼ paperì— ì½•ì½• ì°ê¸°
                if(outH){
                outCanvas.height=outH;
                outCanvas.width=outW;
                outPaper = outCtx.createImageData(outH, outW);
                    for (var i = 0; i<outH; i++){
                        for (var k = 0; k<outW; k++){
                            var px = outImage[i][k];
                            outPaper.data[(i*outH +k) *4 + 0] = px; // R
                            outPaper.data[(i*outH +k) *4 + 1] = px; // G
                            outPaper.data[(i*outH +k) *4 + 2] = px; // B
                            outPaper.data[(i*outH +k) *4 + 3] = 255; // Alpha
                        }
                    }
                outCtx.putImageData(outPaper, 0, 0);
                }
            }

            function selectAlgo(selectNum) {
                console.log(inFile)
                if(inFile){
                switch(parseInt(selectNum.value)){
                    case 100: equl_image(); break;
                    case 101: add_image(); break;
                    case 102: reverse_image(); break;
                    case 103: mirror_image(); break;
                    case 104: vertical_flip(); break;
                    case 105: rotate_90_degrees(); break;
                    case 106: rotate_180_degrees(); break;
                    case 107: rotate_270_degrees(); break;
                    case 108: black_or_white(); break;
                    case 109: sharpening(); break;
                    case 110: bw_image(); break;
                    case 111: bw2_image(); break;
                    case 112: bw3_image(); break;

                    case 200: zoomOut_image(); break;
                    case 201: zoomIn_image(); break;
                    case 202: zoomIn2_image(); break;
                    case 210: rotate_image(); break;
                    case 211: rotate2_image(); break;

                    case 300: embos_image(); break;
                    case 301: blur_image(); break;
                    case 302: edge_image(); break;
                    case 303: laplacian_image(); break;
                    case 304: vertical_image(); break;

                    case 400: histoSt_image(); break;
                    case 401: endIn_image(); break;
                    case 402: histoEqual_image(); break;
                    
                }
            } else {
                    alert('íŒŒì¼ì„ ë¨¼ì € ì„ íƒ í•´ì£¼ì„¸ìš”!');
                    document.getElementsByName('pixel')[0].value = 0;
                    inCtx.fillStyle = "white";
                    inCtx.fillRect(0, 0, inCanvas.width, inCanvas.height);
                    outCtx.fillStyle = "white";
                    outCtx.fillRect(30, 30, outCanvas.width, outCanvas.height);
                    inCtx.font = "35px NotoKR";
                    inCtx.fillStyle = ("red");
                    inCtx.fillText("ì‚¬ì§„ íŒŒì¼ì„ ë¨¼ì €",10,90);
                    outCtx.font = "35px gothic";
                    outCtx.fillStyle = ("rgb(0,0,0)");
                    outCtx.fillText("ì„ íƒ í•´ ì£¼ì„¸ìš”",30,90);
            }
        }

            // =============== ì˜ìƒì²˜ë¦¬ í•¨ìˆ˜ë¶€ ***
            function equl_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ************* ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„*************
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        outImage[i][k] = inImage[i][k];
                    }
                }
                // *****************************************
                displayImage();
            }

            function histoSt_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ************* ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„*************
                // out = (in-low) / (high - low) *255
                var low=inImage[0][0], high = inImage[0][0];
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        if (inImage[i][k] < low) low = inImage[i][k];
                        if (inImage[i][k] > high) high = inImage[i][k];
                    }
                }
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        var out = (inImage[i][k]-low) / (high - low) *255.0
                        outImage[i][k] = parseInt(out);
                    }
                }
                // *****************************************
                displayImage();
            }
            function endIn_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ************* ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„*************
                // out = (in-low) / (high - low) *255
                var low=inImage[0][0], high = inImage[0][0];
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        if (inImage[i][k] < low) low = inImage[i][k];
                        if (inImage[i][k] > high) high = inImage[i][k];
                    }
                }
                low +=50;
                high -= 50;
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        var out = (inImage[i][k]-low) / (high - low) *255.0
                        outImage[i][k] = parseInt(out);
                    }
                }
                // *****************************************
                displayImage();
            }
            function histoEqual_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ************* ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„*************
                // 1 íˆìŠ¤í† ê·¸ë¨ ìƒì„±
                var histo = new Array(256);
                for(var i = 0; i <256; i++) //ì´ˆê¸°í™”
                    histo[i] = 0;
                for(i = 0; i < inH; i++) 
                    for(k = 0; k <inW; k++) 
                        histo[inImage[i][k]]++;
                // 2 ëˆ„ì  íˆìŠ¤í† ê·¸ë¨ ìƒì„±
                var sumHisto = new Array(256);
                for (var i = 0; i< 256; i++) sumHisto[i] = 0.0;
                var sumValue = 0;
                for (i = 0; i<256; i++){
                    sumValue += histo[i];
                    sumHisto[i] = sumValue;
                }
                // 3 ì •ê·œí™”ëœ ëˆ„ì  í•© ìƒì„±
                // n[i] = sumHisto[i] * (1.0/(inH*inW) * 255.0)
                var n = new Array(256);
                for(var i = 0; i<256; i++) n[i]= 0.0;
                for(var i = 0; i<256; i++) n[i]= sumHisto[i] * (1.0/(inH*inW) * 255.0);
                
                // ìµœì¢…
                for(i = 0; i < inH; i++)
                    for(k = 0; k <inW; k++)
                        outImage[i][k] = parseInt(n[inImage[i][k]]);

                 
                // *****************************************
                displayImage();
            }

            function embos_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • --> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¦„.
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ ë©”ëª¨ë¦¬ í• ë‹¹.
                outImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    outImage[i] = new Array(outW);
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„ **
                // ì§±! ì¤‘ìš”
                var mask = [    [ -1.0 ,  0.0 ,  0.0 ], 
                                [  0.0 ,  0.0 ,  0.0 ], 
                                [  0.0 ,  0.0 ,  1.0 ]  ];
                // ì„ì‹œ ì…ë ¥ ë°°ì—´ (ì…ë ¥ë°°ì—´+2) ==> ì‹¤ìˆ˜ ì²˜ë¦¬
                var tmpInImage = new Array(inH+2);
                for(var i=0; i<inH+2; i++)
                    tmpInImage[i] = new Array(inW+2);
                // ì„ì‹œ ì…ë ¥ ì´ˆê¸°í™” (127) --> í‰ê· ê°’? --> ì •ë§ë¡œ í•œì¤„ë„ ëª»ì°¸ëŠ”ë‹¤. (ê°€ì¥ìë¦¬ ê°€ê¹Œìš´ ê°’ìœ¼ë¡œ..)
                for(var i=0; i<inH+2; i++) 
                    for (var k=0; k<inW+2; k++) 
                        tmpInImage[i][k] = 127.0;
                // ì…ë ¥ ë°°ì—´ --> ì„ì‹œ ì…ë ¥ ë°°ì—´ì˜ ê°€ìš´ë° ì™~ 
                for(var i=0; i<inH; i++) 
                    for (var k=0; k<inW; k++) 
                        tmpInImage[i+1][k+1] = inImage[i][k];

                // ì„ì‹œ ì¶œë ¥ ë°°ì—´(ì¶œë ¥ë°°ì—´ê³¼ ë™ì¼) ==> ì‹¤ìˆ˜
                var tmpOutImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    tmpOutImage[i] = new Array(outW);
                //** íšŒì„  ì—°ì‚° ** ë§ˆìŠ¤í¬ë¥¼ ì¡ì•„ì„œ ì „ì²´ë¥¼ ê¸ìœ¼ë©´ì„œ ê³„ì‚°í•˜ê¸°...
                for(var i=0; i<inH; i++) {
                    for (var k=0; k<inW; k++) {
                        var S = 0.0;
                        for(var m=0; m<3; m++) 
                            for (var n=0; n<3; n++) 
                                S += tmpInImage[i+m][k+n] * mask[m][n];
                        
                        tmpOutImage[i][k] = S;
                    }
                }
                // í›„ì²˜ë¦¬ : ë§ˆìŠ¤í¬ì˜ í•©ê³„ê°€ 0ì¼ ê²½ìš°.... (ì˜ˆì™¸ ìˆìŒ)
                for (var i=0; i<outH; i++)
                    for (var k=0; k<outW; k++)
                        tmpOutImage[i][k] += 127.0;
                // ì„ì‹œ ì¶œë ¥ ë°°ì—´ --> ì¶œë ¥ ë°°ì—´
                for (var i=0; i<outH; i++)
                    for (var k=0; k<outW; k++)
                        outImage[i][k] = parseInt(tmpOutImage[i][k]);
                // *******************************
                displayImage();
            }
            function vertical_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • --> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¦„.
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ ë©”ëª¨ë¦¬ í• ë‹¹.
                outImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    outImage[i] = new Array(outW);
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„ **
                // ì§±! ì¤‘ìš”
                var mask = [    [  0.0 ,  0.0 ,  0.0 ], 
                                [ -1.0 ,  1.0 ,  0.0 ], 
                                [  0.0 ,  0.0 ,  0.0 ]  ];
                // ì„ì‹œ ì…ë ¥ ë°°ì—´ (ì…ë ¥ë°°ì—´+2) ==> ì‹¤ìˆ˜ ì²˜ë¦¬
                var tmpInImage = new Array(inH+2);
                for(var i=0; i<inH+2; i++)
                    tmpInImage[i] = new Array(inW+2);
                // ì„ì‹œ ì…ë ¥ ì´ˆê¸°í™” (127) --> í‰ê· ê°’? --> ì •ë§ë¡œ í•œì¤„ë„ ëª»ì°¸ëŠ”ë‹¤. (ê°€ì¥ìë¦¬ ê°€ê¹Œìš´ ê°’ìœ¼ë¡œ..)
                for(var i=0; i<inH+2; i++) 
                    for (var k=0; k<inW+2; k++) 
                        tmpInImage[i][k] = 127.0;
                // ì…ë ¥ ë°°ì—´ --> ì„ì‹œ ì…ë ¥ ë°°ì—´ì˜ ê°€ìš´ë° ì™~ 
                for(var i=0; i<inH; i++) 
                    for (var k=0; k<inW; k++) 
                        tmpInImage[i+1][k+1] = inImage[i][k];

                // ì„ì‹œ ì¶œë ¥ ë°°ì—´(ì¶œë ¥ë°°ì—´ê³¼ ë™ì¼) ==> ì‹¤ìˆ˜
                var tmpOutImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    tmpOutImage[i] = new Array(outW);
                //** íšŒì„  ì—°ì‚° ** ë§ˆìŠ¤í¬ë¥¼ ì¡ì•„ì„œ ì „ì²´ë¥¼ ê¸ìœ¼ë©´ì„œ ê³„ì‚°í•˜ê¸°...
                for(var i=0; i<inH; i++) {
                    for (var k=0; k<inW; k++) {
                        var S = 0.0;
                        for(var m=0; m<3; m++) 
                            for (var n=0; n<3; n++) 
                                S += tmpInImage[i+m][k+n] * mask[m][n];
                        
                        tmpOutImage[i][k] = S;
                    }
                }
               
                // ì„ì‹œ ì¶œë ¥ ë°°ì—´ --> ì¶œë ¥ ë°°ì—´
                for (var i=0; i<outH; i++)
                    for (var k=0; k<outW; k++)
                        outImage[i][k] = parseInt(tmpOutImage[i][k]);
                // *******************************
                displayImage();
            }
            function blur_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • --> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¦„.
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ ë©”ëª¨ë¦¬ í• ë‹¹.
                outImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    outImage[i] = new Array(outW);
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„ **
                // ì§±! ì¤‘ìš”
                var mask = [    [ 1/9, 1/9, 1/9 ], 
                                [  1/9, 1/9, 1/9 ], 
                                [  1/9, 1/9, 1/9 ]  ];
                // ì„ì‹œ ì…ë ¥ ë°°ì—´ (ì…ë ¥ë°°ì—´+2) ==> ì‹¤ìˆ˜ ì²˜ë¦¬
                var tmpInImage = new Array(inH+2);
                for(var i=0; i<inH+2; i++)
                    tmpInImage[i] = new Array(inW+2);
                // ì„ì‹œ ì…ë ¥ ì´ˆê¸°í™” (127) --> í‰ê· ê°’? --> ì •ë§ë¡œ í•œì¤„ë„ ëª»ì°¸ëŠ”ë‹¤. (ê°€ì¥ìë¦¬ ê°€ê¹Œìš´ ê°’ìœ¼ë¡œ..)
                for(var i=0; i<inH+2; i++) 
                    for (var k=0; k<inW+2; k++) 
                        tmpInImage[i][k] = 127.0;
                // ì…ë ¥ ë°°ì—´ --> ì„ì‹œ ì…ë ¥ ë°°ì—´ì˜ ê°€ìš´ë° ì™~ 
                for(var i=0; i<inH; i++) 
                    for (var k=0; k<inW; k++) 
                        tmpInImage[i+1][k+1] = inImage[i][k];

                // ì„ì‹œ ì¶œë ¥ ë°°ì—´(ì¶œë ¥ë°°ì—´ê³¼ ë™ì¼) ==> ì‹¤ìˆ˜
                var tmpOutImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    tmpOutImage[i] = new Array(outW);
                //** íšŒì„  ì—°ì‚° ** ë§ˆìŠ¤í¬ë¥¼ ì¡ì•„ì„œ ì „ì²´ë¥¼ ê¸ìœ¼ë©´ì„œ ê³„ì‚°í•˜ê¸°...
                for(var i=0; i<inH; i++) {
                    for (var k=0; k<inW; k++) {
                        var S = 0.0;
                        for(var m=0; m<3; m++) 
                            for (var n=0; n<3; n++) 
                                S += tmpInImage[i+m][k+n] * mask[m][n];
                        
                        tmpOutImage[i][k] = S;
                    }
                }
                // í›„ì²˜ë¦¬ : ë§ˆìŠ¤í¬ì˜ í•©ê³„ê°€ 0ì¼ ê²½ìš°.... (ì˜ˆì™¸ ìˆìŒ)
                // for (var i=0; i<outH; i++)
                //     for (var k=0; k<outW; k++)
                //         tmpOutImage[i][k] += 127.0;
                // ì„ì‹œ ì¶œë ¥ ë°°ì—´ --> ì¶œë ¥ ë°°ì—´
                for (var i=0; i<outH; i++)
                    for (var k=0; k<outW; k++)
                        outImage[i][k] = parseInt(tmpOutImage[i][k]);
                // *******************************
                displayImage();
            }

            function edge_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • --> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¦„.
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ ë©”ëª¨ë¦¬ í• ë‹¹.
                outImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    outImage[i] = new Array(outW);
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„ **
                // ì§±! ì¤‘ìš”
                var mask = [    [ 0.0 ,  -1.0 ,  0.0 ], 
                                [  -1.0 ,  2.0 ,  0.0 ], 
                                [  0.0 ,  0.0 ,  0.0 ]  ];
                // ì„ì‹œ ì…ë ¥ ë°°ì—´ (ì…ë ¥ë°°ì—´+2) ==> ì‹¤ìˆ˜ ì²˜ë¦¬
                var tmpInImage = new Array(inH+2);
                for(var i=0; i<inH+2; i++)
                    tmpInImage[i] = new Array(inW+2);
                // ì„ì‹œ ì…ë ¥ ì´ˆê¸°í™” (127) --> í‰ê· ê°’? --> ì •ë§ë¡œ í•œì¤„ë„ ëª»ì°¸ëŠ”ë‹¤. (ê°€ì¥ìë¦¬ ê°€ê¹Œìš´ ê°’ìœ¼ë¡œ..)
                for(var i=0; i<inH+2; i++) 
                    for (var k=0; k<inW+2; k++) 
                        tmpInImage[i][k] = 127.0;
                // ì…ë ¥ ë°°ì—´ --> ì„ì‹œ ì…ë ¥ ë°°ì—´ì˜ ê°€ìš´ë° ì™~ 
                for(var i=0; i<inH; i++) 
                    for (var k=0; k<inW; k++) 
                        tmpInImage[i+1][k+1] = inImage[i][k];

                // ì„ì‹œ ì¶œë ¥ ë°°ì—´(ì¶œë ¥ë°°ì—´ê³¼ ë™ì¼) ==> ì‹¤ìˆ˜
                var tmpOutImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    tmpOutImage[i] = new Array(outW);
                //** íšŒì„  ì—°ì‚° ** ë§ˆìŠ¤í¬ë¥¼ ì¡ì•„ì„œ ì „ì²´ë¥¼ ê¸ìœ¼ë©´ì„œ ê³„ì‚°í•˜ê¸°...
                for(var i=0; i<inH; i++) {
                    for (var k=0; k<inW; k++) {
                        var S = 0.0;
                        for(var m=0; m<3; m++) 
                            for (var n=0; n<3; n++) 
                                S += tmpInImage[i+m][k+n] * mask[m][n];
                        
                        tmpOutImage[i][k] = S;
                    }
                }
                // í›„ì²˜ë¦¬ : ë§ˆìŠ¤í¬ì˜ í•©ê³„ê°€ 0ì¼ ê²½ìš°.... (ì˜ˆì™¸ ìˆìŒ)
                // for (var i=0; i<outH; i++)
                //     for (var k=0; k<outW; k++)
                //         tmpOutImage[i][k] += 127.0;
                // ì„ì‹œ ì¶œë ¥ ë°°ì—´ --> ì¶œë ¥ ë°°ì—´
                for (var i=0; i<outH; i++)
                    for (var k=0; k<outW; k++)
                        outImage[i][k] = parseInt(tmpOutImage[i][k]);
                // *******************************
                displayImage();
            }

            function laplacian_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • --> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¦„.
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ ë©”ëª¨ë¦¬ í• ë‹¹.
                outImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    outImage[i] = new Array(outW);
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„ **
                // ì§±! ì¤‘ìš”
                var mask = [    [  0.0 ,  1.0 ,  0.0 ], 
                                [  1.0 ,  -4.0 ,  1.0 ], 
                                [  0.0 ,  1.0 ,  0.0 ]  ];
                // ì„ì‹œ ì…ë ¥ ë°°ì—´ (ì…ë ¥ë°°ì—´+2) ==> ì‹¤ìˆ˜ ì²˜ë¦¬
                var tmpInImage = new Array(inH+2);
                for(var i=0; i<inH+2; i++)
                    tmpInImage[i] = new Array(inW+2);
                // ì„ì‹œ ì…ë ¥ ì´ˆê¸°í™” (127) --> í‰ê· ê°’? --> ì •ë§ë¡œ í•œì¤„ë„ ëª»ì°¸ëŠ”ë‹¤. (ê°€ì¥ìë¦¬ ê°€ê¹Œìš´ ê°’ìœ¼ë¡œ..)
                for(var i=0; i<inH+2; i++) 
                    for (var k=0; k<inW+2; k++) 
                        tmpInImage[i][k] = 127.0;
                // ì…ë ¥ ë°°ì—´ --> ì„ì‹œ ì…ë ¥ ë°°ì—´ì˜ ê°€ìš´ë° ì™~ 
                for(var i=0; i<inH; i++) 
                    for (var k=0; k<inW; k++) 
                        tmpInImage[i+1][k+1] = inImage[i][k];

                // ì„ì‹œ ì¶œë ¥ ë°°ì—´(ì¶œë ¥ë°°ì—´ê³¼ ë™ì¼) ==> ì‹¤ìˆ˜
                var tmpOutImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    tmpOutImage[i] = new Array(outW);
                //** íšŒì„  ì—°ì‚° ** ë§ˆìŠ¤í¬ë¥¼ ì¡ì•„ì„œ ì „ì²´ë¥¼ ê¸ìœ¼ë©´ì„œ ê³„ì‚°í•˜ê¸°...
                for(var i=0; i<inH; i++) {
                    for (var k=0; k<inW; k++) {
                        var S = 0.0;
                        for(var m=0; m<3; m++) 
                            for (var n=0; n<3; n++) 
                                S += tmpInImage[i+m][k+n] * mask[m][n];
                        
                        tmpOutImage[i][k] = S;
                    }
                }
                // í›„ì²˜ë¦¬ : ë§ˆìŠ¤í¬ì˜ í•©ê³„ê°€ 0ì¼ ê²½ìš°.... (ì˜ˆì™¸ ìˆìŒ)
                // for (var i=0; i<outH; i++)
                //     for (var k=0; k<outW; k++)
                //         tmpOutImage[i][k] += 127.0;
                // ì„ì‹œ ì¶œë ¥ ë°°ì—´ --> ì¶œë ¥ ë°°ì—´
                for (var i=0; i<outH; i++)
                    for (var k=0; k<outW; k++)
                        outImage[i][k] = parseInt(tmpOutImage[i][k]);
                // *******************************
                displayImage();
            }
            function rotate_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++)
                    outImage[i] = new Array(outW);
                
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                var angle = parseInt(prompt("ê°ë„", 45));
                angle = angle *Math.PI/ 180;
                // ê³µì‹ 
                // new_i = cos*old_i -sin*old_k 
                // new_k = sin*old_i + cos*old_k
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        var new_i = parseInt(Math.cos(angle) * i - Math.sin(angle) * k);
                        var new_k = parseInt(Math.sin(angle) * i + Math.cos(angle) * k);
                        if(((0 <= new_i) && (new_i < outH)) && ((0 <= new_k) && (new_k < outW)))
                        outImage[new_i][new_k] = inImage[i][k];
                    }
                }
                // **************************
                displayImage();
            }
            function rotate2_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++)
                    outImage[i] = new Array(outW);
                
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                var angle = parseInt(prompt("ê°ë„", 45));
                angle = angle *Math.PI/ 180;

                var cx = parseInt(inH/2);
                var cy = parseInt(inW/2);
                // ê³µì‹ 
                // new_i = cos*(old_i-cx) - sin*(old_k-cy) +cx 
                // new_k = sin*(old_i-cx) + cos*(old_k-cy) +cy
                for(i = 0; i < outH; i++) {
                    for(k = 0; k <outW; k++) {
                        var old_i = parseInt(Math.cos(angle) * (i-cx) + Math.sin(angle) * (k-cy) +cx);
                        var old_k = parseInt(-Math.sin(angle) * (i-cx) + Math.cos(angle) * (k-cy) +cy);
                        if(((0 <= old_i) && (old_i < inH)) && ((0 <= old_k) && (old_k < inW)))
                        outImage[i][k] = inImage[old_i][old_k];
                    }
                }
                // **************************
                displayImage();
            }
            function zoomOut_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                var scale = parseInt(prompt("ì¶•ì†Œë°°ìœ¨", 2))                
                outH = parseInt(inH / scale);
                outW = parseInt(inW / scale);
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ìº”ë²„ìŠ¤ í¬ê¸° ë³€ê²½
                outCanvas.height = outH;
                outCanvas.width = outW;
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„

                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        outImage[parseInt(i/scale)][parseInt(k/scale)] = inImage[i][k];
                    }
                }
                // **************************
                displayImage();
            }
            function zoomIn_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                var scale = parseInt(prompt("í™•ëŒ€ ë°°ìœ¨", 2))                
                outH = parseInt(inH * scale);
                outW = parseInt(inW * scale);
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ìº”ë²„ìŠ¤ í¬ê¸° ë³€ê²½
                outCanvas.height = outH;
                outCanvas.width = outW;
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„

                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        outImage[parseInt(i*scale)][parseInt(k*scale)] = inImage[i][k];
                        outImage[parseInt(i*scale+scale-1)][parseInt(k*scale)] = inImage[i][k];
                        outImage[parseInt(i*scale)][parseInt(k*scale+scale-1)] = inImage[i][k];
                        outImage[parseInt(i*scale+scale-1)][parseInt(k*scale+scale-1)] = inImage[i][k];
                    }
                }
                // **************************
                displayImage();
            }
            function zoomIn2_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                var scale = parseInt(prompt("í™•ëŒ€ ë°°ìœ¨", 2))                
                outH = parseInt(inH * scale);
                outW = parseInt(inW * scale);
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ìº”ë²„ìŠ¤ í¬ê¸° ë³€ê²½
                outCanvas.height = outH;
                outCanvas.width = outW;
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„

                for(i = 0; i < outH; i++) {
                    for(k = 0; k <outW; k++) {
                        outImage[i][k] = inImage[parseInt(i/scale)][parseInt(k/scale)];
                    }
                }
                // **************************
                displayImage();
            }
            function bw_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        if (inImage[i][k] <= 127) outImage[i][k] = 0;
                        else outImage[i][k] = 255
                    }
                }
                // **************************
                displayImage();
            }
            function bw2_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                var avgValue, hapValue = 0;
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        hapValue += inImage[i][k];
                    }
                }
                avgValue = hapValue / (inH * inW);
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        if (inImage[i][k] <= avgValue) outImage[i][k] = 0;
                        else outImage[i][k] = 255
                    }
                }
                // **************************
                displayImage();
            }
            function bw3_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                var mid = 0;
                var arr = [];
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        // arr[index++] = inImage[i][k];
                        arr.push(inImage[i][k]);
                    }
                }

                arr.sort(function(a, b)  {
                    return a - b;
                });

                console.log(arr);
                console.log(arr[0]);
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        if (inImage[i][k] <= arr[arr.length/2-1]) outImage[i][k] = 0;
                        else outImage[i][k] = 255
                    }
                }
                // **************************
                displayImage();
            }

            function add_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • -> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ ë‹¤ë¦„
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ í• ë‹¹
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                var value= parseInt(prompt("ê°’", 50));
                if(!value||!Number.isInteger(value)) {alert('ì·¨ì†Œ ë²„íŠ¼ or ì˜ëª»ëœ ì…ë ¥ìœ¼ë¡œ ì·¨ë„ë¨'); return 0;}
                // valueì— ì•„ë¬´ê²ƒë„ ì…ë ¥ ì•ˆí•˜ê±°ë‚˜ ì·¨ì†Œ, ìˆ«ìê°€ ì•„ë‹Œê°’ ë“¤ì–´ê°€ë©´ 
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        if(inImage[i][k] + value < 0) outImage[i][k] = 0;
                        else if(inImage[i][k] + value > 256) outImage[i][k] = 255;
                        else outImage[i][k] = inImage[i][k] + value;
                    }
                }
                // **************************
                displayImage();
            }
            function reverse_image() {
                // (ì¤‘ìš”!) ì¶œë ¥ ì˜ìƒì˜ í¬ê¸°ë¥¼ ê²°ì • --> ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¦„.
                outH = inH;
                outW = inW;
                // ì¶œë ¥ ì´ë¯¸ì§€ ë©”ëª¨ë¦¬ í• ë‹¹.
                outImage = new Array(outH);
                for(var i=0; i<outH; i++)
                    outImage[i] = new Array(outW);
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„ **
                for(var i=0; i<inH; i++) {
                    for (var k=0; k<inW; k++) {
                        outImage[i][k] = 255 - inImage[i][k];
                    }
                }
                // *******************************
                displayImage();
            }
            
            function mirror_image() {   
                outH = inH;
                outW = inW;
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        outImage[i][inW-k-1] = inImage[i][k];
                    }
                }
                displayImage();
            }
            function vertical_flip() {   
                outH = inH;
                outW = inW;
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        outImage[inH-i-1][k] = inImage[i][k];
                    }
                }
                displayImage();
            }
            function rotate_90_degrees() {   
                outH = inH;
                outW = inW;
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        outImage[Math.abs(k-(inH-1))][i] = inImage[i][k];
                    }
                }
                displayImage();
            }
            function rotate_180_degrees() {   
                outH = inH;
                outW = inW;
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        outImage[Math.abs(i-(inH-1))][Math.abs(k-(inW-1))] = inImage[i][k];
                    }
                }
                displayImage();
            }
            function rotate_270_degrees() {   
                outH = inH;
                outW = inW;
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        outImage[k][Math.abs(i-(inH-1))] = inImage[i][k];
                    }
                }
                displayImage();
            }
            function black_or_white() {   
                outH = inH;
                outW = inW;
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        if(inImage[i][k] < 128) outImage[i][k] = 0;
                        else outImage[i][k] = 255;
                        // outImage[i][k] = 0;
                    }
                }
                displayImage();
            }
            function sharpening() {   
                outH = inH;
                outW = inW;
                outImage = new Array(outH);
                for(var i = 0; i<outH; i++) {
                    outImage[i] = new Array(outW);
                }
                // ** ì§„ì§œ ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ êµ¬í˜„
                for(i = 0; i < inH; i++) {
                    for(k = 0; k <inW; k++) {
                        if(inImage[i][k] < 40) outImage[i][k] = 0;
                        else outImage[i][k] = inImage[i][k];

                    }
                }
                displayImage();
            }
            
            var mark, pray, hover1, hover2;
            function chg(){
            mark = document.getElementById('mark');
            pray = document.getElementById('pray');
            hover1 = document.getElementById('lena');
            hover2 = document.getElementById('lenaExample');
            mark.classList.toggle('show');
            mark.classList.toggle('hide');
            pray.classList.toggle('show');
            pray.classList.toggle('hide');
            hover1.classList.toggle('stophv');
            hover2.classList.toggle('stophv');
            }
            
        </script>

    </HEAD>

    <BODY onload="init()">
        <h1 class="title">ğŸ“½ì˜ìƒì²˜ë¦¬ ì•Œê³ ë¦¬ì¦˜ğŸ“½ </h1>
        <div>
            <img id="lena"src="https://www.researchgate.net/profile/Naison-Gasela/publication/237054247/figure/fig2/AS:299436317134849@1448402589122/Lena-original-gray.png" alt="lena">
            <span id="mark" class="show" onclick="chg()">ğŸ‘‰â†’</span>
            <span id="pray" class="hide" onclick="chg()">ğŸ™ğŸ™</span>
            <img id="lenaExample"src="https://i.stack.imgur.com/z89Ej.png" alt="lena_example">

        </div>
        <form>
            <div class="container">
                <canvas id="inCanvas"></canvas>
                <span class="arrow">â†’</span>
                <canvas id="outCanvas"></canvas><br/>
            </div>
            
            <input type="file" id="inFile" onchange="openRawImage()"/><br/>
            <select name="pixel" id="" onchange="selectAlgo(this.form.pixel)">
                <option value="0">ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•˜ì„¸ìš”</option>
                <optgroup label="í™”ì†Œì  ì²˜ë¦¬">
                    <option value="100">ë™ì¼ ì˜ìƒ</option>
                    <option value="101">ë°ê²Œ / ì–´ë‘¡ê²Œ</option>
                    <option value="102">ë°˜ì „</option>
                    <option value="103">ì¢Œìš° ë°˜ì „</option>
                    <option value="104">ìƒí•˜ ë°˜ì „</option>
                    <option value="105">90ë„ íšŒì „</option>
                    <option value="106">180ë„ íšŒì „</option>
                    <option value="107">270ë„ íšŒì „</option>
                    <option value="108">í‘ë°±</option>
                    <option value="109">ì„ ëª…í•˜ê²Œ</option>

                    <option value="110">127</option>
                    <option value="111">í‰ê· </option>
                    <option value="112">ì¤‘ìœ„ìˆ˜</option>
                
                <optgroup label="ê¸°í•˜í•™ ì²˜ë¦¬">
                    <option value="200">ì¶•ì†Œ</option>
                    <option value="201">í™•ëŒ€</option>
                    <option value="202">í™•ëŒ€2</option>
                    <option value="210">íšŒì „</option>
                    <option value="211">íšŒì „(ì¤‘ì•™ë°±, ì›Œë”©)</option>

                <optgroup label="í™”ì†Œì˜ì—­ ì²˜ë¦¬">
                    <option value="300">ì— ë³´ì‹±</option>
                    <option value="301">ë¸”ëŸ¬ë§</option>
                    <option value="302">ìš´ê³½ì„  ì¶”ì¶œ</option>
                    <option value="303">ë¼í”Œë¼ì‹œì•ˆ ì•³ì§€</option>
                    <option value="304">ìˆ˜ì§ê²€ì¶œ</option>
                </optgroup>
                <optgroup label="íˆìŠ¤í† ê·¸ë¨ ì²˜ë¦¬">
                    <option value="400">íˆìŠ¤í† ê·¸ë¨ ìŠ¤íŠ¸ë ˆì¹­(ëª…ì•”ëŒ€ë¹„)</option>
                    <option value="401">ì•¤ë“œì¸ íƒìƒ‰</option>
                    <option value="402">íˆìŠ¤í† ê·¸ë¨ í‰í™œí™”</option>
                </optgroup>
                
            </select><br/>
        </form>
        <div class="bottom">
            <hr>
            <p>Special thanks to <a href="https://ko.wikipedia.org/wiki/%EB%A0%88%EB%82%98_(%EC%9D%B4%EB%AF%B8%EC%A7%80)" target="_blank">lena</a></p>
        </div>
        
    </BODY>
</HTML>